---
layout: default
---

{% assign totalPorta = page.dias | where_exp: "item", "item.porta" | size %}
{% assign totalFicha = page.dias | where_exp: "item", "item.ficha" | size %}
{% assign totalVelas = page.dias | where_exp: "item", "item.velas" | size %}

{% if totalPorta > 0 or totalFicha > 0 or totalVelas > 0 %}
<el-dialog>
  <dialog id="funcoes_escala" class="fixed inset-0 size-auto max-h-none max-w-none overflow-y-auto bg-transparent backdrop:bg-transparent">
    <el-dialog-backdrop class="fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"></el-dialog-backdrop>

    <div tabindex="0" class="flex min-h-full items-end justify-center p-4 text-center focus:outline-none sm:items-center sm:p-0">
      <el-dialog-panel class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95">
        <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
          <table class="w-full">
            <thead class="text-white ">
              <tr>
                <th
                  class="{{page.cor}} border border-gray-200 p-2 text-center print:text-gray-900 print:bg-gray-400 print:text-2xl"
                >Dia</th>
                <th
                  class="{{page.cor}} border border-gray-200 p-2 text-center print:text-gray-900 print:bg-gray-400 print:text-2xl"
                >Porta</th>
                <th
                  class="{{page.cor}} border border-gray-200 p-2 text-center print:text-gray-900 print:bg-gray-400 print:text-2xl"
                >Ficha</th>
                <th
                  class="{{page.cor}} border border-gray-200 p-2 text-center print:text-gray-900 print:bg-gray-400 print:text-2xl"
                >Circulos e Velas</th>
              </tr>
            </thead>
            <tbody>
              {% for dia in page.dias limit: 8 %}
              {% assign numero_mes = dia.data | date: "%-m" | minus: 1 %}
              {% assign nome_mes = site.data.meses.nomes[numero_mes] %}
              {% assign dias_da_semana = "Dom|Seg|Ter|Qua|Qui|Sex|Sáb" | split: "|" %}
              {% assign dia_numero = dia.data | date: "%w" | plus: 0 %}
                  <tr class="border border-gray-200 print:bg-gray-400 sticky top-0 z-10">
                    <td class="uppercase text-white print:text-gray-900 text-left print:text-2xl">
                      <div class="min-w-[80px] flex flex-col items-center justify-center snap-start">
                        <span class="text-xl font-bold text-slate-800 leading-none">{{dia.data | date: "%d"}}</span>
                        <span class="text-xs font-medium text-slate-500 mt-1">{{nome_mes}}</span>
                      </div>
                    </td>
                    <td class="px-6 py-2 border border-gray-200 print:text-2xl">{{dia.porta}}</td>
                    <td class="px-6 py-2 border border-gray-200 print:text-2xl">{{dia.ficha}}</td>
                    <td class="px-6 py-2 border border-gray-200 print:text-2xl">{{dia.velas}}</td>
                  </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
          <button type="button" command="close" commandfor="funcoes_escala" class="inline-flex w-full justify-center rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-gray-500 sm:ml-3 sm:w-auto cursor-pointer">Fechar</button>
        </div>
      </el-dialog-panel>
    </div>
  </dialog>
</el-dialog>
{% endif %}

<main class="max-w-md mx-auto pb-10">

  <section class="pt-6 pb-2 px-4">
    <div class="{{page.cor}} rounded-2xl p-6 text-white shadow-lg shadow-indigo-200">
      <h2 class="text-2xl font-bold mb-1">Escala {{page.escala}} - {{page.dia}}</h2>
    </div>
  </section>


  <section class="pt-6 pb-2 px-4">
    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      Próximas datas
      {% if totalPorta > 0 or totalFicha > 0 or totalVelas > 0 %}
        <button command="show-modal" commandfor="funcoes_escala" class="{{page.cor}} rounded-md px-2.5 py-1.5 text-sm font-semibold text-white cursor-pointer ">Funções</button>
      {% endif %}
    </h3>

    <div class="flex gap-3 overflow-x-auto pb-2" >
      {% for dia in page.dias limit: 8 %}
      {% assign numero_mes = dia.data | date: "%-m" | minus: 1 %}
      {% assign nome_mes = site.data.meses.nomes[numero_mes] %}
      {% assign dias_da_semana = "Dom|Seg|Ter|Qua|Qui|Sex|Sáb" | split: "|" %}
      {% assign dia_numero = dia.data | date: "%w" | plus: 0 %}
      <div class="min-w-[80px] bg-white border border-slate-200 rounded-xl p-3 flex flex-col items-center justify-center shadow-sm snap-start">
        <span class="text-[10px] uppercase font-bold text-slate-400 mb-1">{{dias_da_semana[dia_numero]}}</span>
        <span class="text-xl font-bold text-slate-800 leading-none">{{dia.data | date: "%d"}}</span>
        <span class="text-xs font-medium text-slate-500 mt-1">{{nome_mes}}</span>
      </div>
      {% endfor %}
    </div>
  </section>

  <hr class="border-slate-200 mx-4 mb-4">

  <section class="px-4" >
    {% for item in page.dados %}
      {% if item.pessoas.size > 0 %}
        <div class="mb-6 bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
          <div class="bg-slate-50 px-4 py-3 border-b border-slate-100">
            <h3 class="text-xl font-bold text-slate-700 flex items-center gap-2 sticky top-0">
              <span class="w-2 h-2 rounded-full bg-indigo-500"></span>
              {{item.titulo}}
            </h3>
          </div>
          <ul class="divide-y divide-slate-50">
            {% for pessoa in item.pessoas %}
              <li class="flex justify-between items-center p-2 hover:bg-slate-50 transition-colors">
                <div class="flex items-center gap-3">
                  <span class="text-sm font-medium text-slate-700">{{pessoa.nome}}</span>
                </div>
                <span class="p-1 text-[11px] font-bold border rounded-md tracking-wide bg-blue-50 text-blue-700 border-blue-100">
                  {{pessoa.descricao}}
                </span>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    {% endfor %}
  </section>

</main>
